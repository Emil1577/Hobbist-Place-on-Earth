(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{76:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a,c,r,i,s,o,l,b,j,d,u,m,h=n(1),O=n.n(h),g=n(66),p=n.n(g),x=(n(76),n(18)),f=n(70),v=n(90),y=n(92),w=n(89),N=n(68),k=n(16),S=n(6),$=n(31),_=n(32),C=n(58),I=new(function(){function e(){Object($.a)(this,e)}return Object(_.a)(e,[{key:"getProfile",value:function(){return Object(C.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(C.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),T=n(3),D=function(){return Object(T.jsx)("header",{className:"bg-primary text-light mb-4 py-3 flex-row align-center",children:Object(T.jsxs)("div",{className:"container flex-row justify-space-between-lg justify-center align-center",children:[Object(T.jsxs)("div",{children:[Object(T.jsx)(k.b,{className:"text-light",to:"/",children:Object(T.jsx)("h1",{className:"m-0",children:"Hobbies"})}),Object(T.jsx)("p",{className:"m-0",children:"Get into the mind of a programmer."})]}),Object(T.jsx)("div",{children:I.loggedIn()?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(k.b,{className:"btn btn-lg btn-info m-2",to:"/me",children:[I.getProfile().data.username,"'s profile"]}),Object(T.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),I.logout()},children:"Logout"})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(k.b,{className:"btn btn-lg btn-info m-2",to:"/login",children:"Login"}),Object(T.jsx)(k.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},H=function(){var e=Object(S.k)(),t=Object(S.m)();return Object(T.jsx)("footer",{className:"w-100 mt-auto bg-secondary p-4",children:Object(T.jsxs)("div",{className:"container text-center mb-5",children:["/"!==e.pathname&&Object(T.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t(-1)},children:"\u2190 Go Back"}),Object(T.jsxs)("h4",{children:["Hobbiest Place on Earth"," ",Object(T.jsx)("span",{className:"emoji",role:"img","aria-label":"heart","aria-hidden":"false",children:"\u2764\ufe0f"})," ","by the Team 7."]})]})})},q=n(8),F=n(14),E=n(17),L=n(9),P=n(93),Y=n(20),B=n(91),U=(Object(B.a)(a||(a=Object(Y.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),Object(B.a)(c||(c=Object(Y.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"])))),A=Object(B.a)(r||(r=Object(Y.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),G=(Object(B.a)(i||(i=Object(Y.a)(["\n  mutation addCategory ( $title: String!, $description: String!){\n    addCategory ( title: $title, description: $description) {\n      _id\n      title\n      description\n      hobby {\n        _id\n        title\n      }\n      user {\n        _id\n      }\n    }\n    \n  }\n"]))),Object(B.a)(s||(s=Object(Y.a)(["\nmutation addHobby ( $title: String!, $description: String!){\n  addHobby ( title: $title, description: $description) {\n    title\n    description\n    category {\n      _id\n      title\n    }\n    user {\n      _id\n    }\n  }\n  \n}\n"])))),J=(Object(B.a)(o||(o=Object(Y.a)(["\n  {\n    user {\n      firstName\n      lastName\n      categories {\n        _id\n        title\n        hobby {\n          _id\n          title\n          description\n        }\n      }\n    }\n  }\n"]))),Object(B.a)(l||(l=Object(Y.a)(["\n  query getCategory($category: ID) {\n    hobbies {\n      _id\n      title\n      description\n      hobbies\n    }\n  }\n"])))),Q=Object(B.a)(b||(b=Object(Y.a)(["\n  query getCategories {\n    category {\n      _id\n      thoughtText\n      thoughtAuthor\n      createdAt\n    }\n  }\n"]))),z=(Object(B.a)(j||(j=Object(Y.a)(["\n  {\n    comments {\n      _id\n      content\n      user {\n        firstname\n      }\n      hobby { category }\n    }\n  }\n"]))),Object(B.a)(d||(d=Object(Y.a)(["\n  {\n    hobbies {\n      _id\n      title\n      category {\n        title\n      }\n    }\n  }\n"]))),Object(B.a)(u||(u=Object(Y.a)(["\n  query getSingleHobby($hobbyId: ID!) {\n    hobby(hobbytId: $hobbyId) {\n      _id\n      title\n      category {\n        title\n      }\n    }\n  }\n"]))),Object(B.a)(m||(m=Object(Y.a)(["\n  query me {\n    me {\n      _id\n      firstname\n      lastname\n      categories {\n        _id\n        title\n        hobby {\n          _id\n          title\n          description\n        }\n      }\n    }\n  }\n"]))),function(){var e=Object(h.useState)(""),t=Object(L.a)(e,2),n=t[0],a=t[1],c=Object(h.useState)(""),r=Object(L.a)(c,2),i=r[0],s=r[1],o=Object(h.useState)(""),l=Object(L.a)(o,2),b=l[0],j=l[1],d=Object(h.useState)(0),u=Object(L.a)(d,2),m=u[0],O=u[1],g=Object(P.a)(G,{update:function(e,t){var n=t.data.addHobby;try{var a=e.readQuery({query:J}).categories.map((function(e){return e._id===n.categories[0]._id?Object(x.a)(Object(x.a)({},e),{},{hobbies:[].concat(Object(E.a)(e.hobbies),[n])}):e}));e.writeQuery({query:Q,data:{categories:a}})}catch(c){console.error(c)}}}),p=Object(L.a)(g,2),f=p[0],v=p[1],y=v.loading,w=v.error,N=function(){var e=Object(F.a)(Object(q.a)().mark((function e(t){var c;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f({variables:{categoryId:b,title:n,description:i}});case 4:c=e.sent,c.data,a(""),s(""),j(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error creating hobby:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("h3",{children:"Add a New Hobby"}),I.loggedIn()?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("p",{className:"m-0 ".concat(280===m||w?"text-danger":""),children:["Character Count: ",m,"/280"]}),Object(T.jsxs)("form",{onSubmit:N,children:[Object(T.jsxs)("label",{children:["Title:",Object(T.jsx)("input",{type:"text",value:n,onChnage:function(e){return a(e.target.value)}})]}),Object(T.jsxs)("label",{children:["Description:",Object(T.jsx)("textarea",{value:i,onChage:function(e){var t=e.target,n=t.name,c=t.value;"description"===n&&c.length<=280?(s(c),O(c.length)):(a(c),O(c.length))}})]}),Object(T.jsxs)("label",{children:["Category:",Object(T.jsx)("input",{type:"text",value:b,onChange:function(e){return j(e.target.value)}})]}),Object(T.jsx)("button",{type:"submit",disabled:!n||!i||!b,children:y?"Creating...":"Create Hobby"}),w&&Object(T.jsxs)("div",{className:"col-12 my-3 bg-danger text-white p-3",children:["Error creating hobby: ",w.message]})]})]}):Object(T.jsxs)("p",{children:["You need to be logged in to add a Hobby. Please"," ",Object(T.jsx)(k.b,{to:"/login",children:"login"})," or ",Object(T.jsx)(k.b,{to:"/signup",children:"signup."})]})]})}),M=function(){return Object(T.jsx)("main",{children:Object(T.jsxs)("div",{className:"flex-row justify-center",children:[Object(T.jsx)("div",{className:"col-12 col-md-10 mb-3 p-3",style:{border:"1px dotted #1a1a1a"},children:Object(T.jsx)(z,{})}),Object(T.jsx)("div",{children:"testing"}),Object(T.jsxs)("div",{className:"col-12 col-md-8 mb-3",children:[Object(T.jsx)("div",{children:"Loading..."}),Object(T.jsx)(H,{})]})]})})},K=n(11),R=function(){var e=Object(h.useState)({username:"",email:"",password:""}),t=Object(L.a)(e,2),n=t[0],a=t[1],c=Object(P.a)(A),r=Object(L.a)(c,2),i=r[0],s=r[1],o=s.error,l=s.data,b=function(e){var t=e.target,c=t.name,r=t.value;a(Object(x.a)(Object(x.a)({},n),{},Object(K.a)({},c,r)))},j=function(){var e=Object(F.a)(Object(q.a)().mark((function e(t){var a,c;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,i({variables:Object(x.a)({},n)});case 5:a=e.sent,c=a.data,I.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(T.jsx)("div",{className:"col-12 col-lg-10",children:Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(T.jsxs)("div",{className:"card-body",children:[l?Object(T.jsxs)("p",{children:["Success! You may now head"," ",Object(T.jsx)(k.b,{to:"/",children:"back to the homepage."})]}):Object(T.jsxs)("form",{onSubmit:j,children:[Object(T.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:n.name,onChange:b}),Object(T.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:b}),Object(T.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:b}),Object(T.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),o&&Object(T.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:o.message})]})]})})})},V=function(e){var t=Object(h.useState)({email:"",password:""}),n=Object(L.a)(t,2),a=n[0],c=n[1],r=Object(P.a)(U),i=Object(L.a)(r,2),s=i[0],o=i[1],l=o.error,b=o.data,j=function(e){var t=e.target,n=t.name,r=t.value;c(Object(x.a)(Object(x.a)({},a),{},Object(K.a)({},n,r)))},d=function(){var e=Object(F.a)(Object(q.a)().mark((function e(t){var n,r;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,s({variables:Object(x.a)({},a)});case 5:n=e.sent,r=n.data,I.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(T.jsx)("div",{className:"col-12 col-lg-10",children:Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(T.jsxs)("div",{className:"card-body",children:[b?Object(T.jsxs)("p",{children:["Success! You may now head"," ",Object(T.jsx)(k.b,{to:"/",children:"back to the homepage."})]}):Object(T.jsxs)("form",{onSubmit:d,children:[Object(T.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:j}),Object(T.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:j}),Object(T.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(T.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},W=Object(f.a)({uri:"/graphql"}),X=Object(N.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(x.a)(Object(x.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),Z=new v.a({link:X.concat(W),cache:new y.a});var ee=function(){return Object(T.jsx)(w.a,{client:Z,children:Object(T.jsx)(k.a,{children:Object(T.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(T.jsx)(D,{}),Object(T.jsx)("div",{className:"container",children:Object(T.jsxs)(S.c,{children:[Object(T.jsx)(S.a,{path:"/",element:Object(T.jsx)(M,{})}),Object(T.jsx)(S.a,{path:"/login",element:Object(T.jsx)(V,{})}),Object(T.jsx)(S.a,{path:"/signup",element:Object(T.jsx)(R,{})})]})}),Object(T.jsx)(H,{})]})})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};p.a.render(Object(T.jsx)(O.a.StrictMode,{children:Object(T.jsx)(ee,{})}),document.getElementById("root")),te()}},[[79,1,2]]]);
//# sourceMappingURL=main.3c4cde8c.chunk.js.map